<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Altın Hesaplama</title>
  <style>
    body {
      background: #111;
      color: #eee;
      font-family: Arial, sans-serif;
      max-width: 500px;
      margin: auto;
      padding: 20px;
    }
    .satir {
      display: flex;
      gap: 10px;
      align-items: center;
      margin-bottom: 10px;
    }
    .satir span {
      width: 140px;
      font-size: 14px;
    }
    input {
      flex: 1;
      padding: 6px;
      font-size: 14px;
    }
    .toplam {
      margin-top: 20px;
      font-size: 20px;
      color: #00ff99;
    }
  </style>
</head>
<body>

<h2>Altın Hesaplama (kişisel)</h2>

<div id="liste"></div>

<div class="toplam" id="toplam">Toplam: —</div>

<script>
const API_KEY = "BURAYA_API_KEY_YAZ";

// Senin istediğin sabit liste
const kullanilanAltinlar = [
  "22 Ayar Gram Altın",
  "Çeyrek Altın",
  "Yarım Altın",
  "Ata Altın",
  "Reşat Altın"
];

let fiyatlar = {};

async function baslat() {
  const res = await fetch(
    "https://api.collectapi.com/economy/goldPrice",
    {
      headers: { authorization: "apikey " + API_KEY }
    }
  );

  const data = await res.json();

  // Fiyatları map'le
  data.result.forEach(item => {
    if (kullanilanAltinlar.includes(item.name)) {
      fiyatlar[item.name] = parseFloat(item.selling);
    }
  });

  arayuzOlustur();
}

function arayuzOlustur() {
  const liste = document.getElementById("liste");

  kullanilanAltinlar.forEach(ad => {
    const satir = document.createElement("div");
    satir.className = "satir";

    satir.innerHTML = `
      <span>${ad}</span>
      <input type="number" step="0.01" data-ad="${ad}" placeholder="miktar">
    `;

    liste.appendChild(satir);
  });

  document.querySelectorAll("input").forEach(inp => {
    inp.addEventListener("input", hesapla);
  });
}

function hesapla() {
  let toplam = 0;

  document.querySelectorAll("input").forEach(inp => {
    const ad = inp.dataset.ad;
    const miktar = parseFloat(inp.value);

    if (!isNaN(miktar) && fiyatlar[ad]) {
      toplam += miktar * fiyatlar[ad];
    }
  });

  document.getElementById("toplam").innerText =
    "Toplam: " + toplam.toFixed(2) + " TL";
}

baslat();
</script>

</body>
</html>
